<% if @opportunity.contacts.blank? %>
<div class="col-lg-12">
No contacts added yet.
</div>
<% else %>
    <% @opportunity.contacts.each do |contact| %>
    <div class="col-lg-6">
        <br>
        <div class="media">
            <div class="media-left">
                <%= image_tag('http://placehold.it/43x43', class: "media-object") %>
            </div>
            <div class="media-body">
                <h5 class="media-heading">
                    <%= contact.name %>
                    <div class="pull-right">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      <i class="caret"></i>
                    </a>
                    <ul class="dropdown-menu">
                      <li><%= link_to 'Edit', '#',
                      data: {toggle: "modal", target: "#contact-#{contact.id}"} %></li>
                    <li><%= link_to 'Delete', opportunity_contact_path(@opportunity, contact),
                    method: :delete, remote: true %></li>
                  </ul>
                </div>
                    <br>
                    <small><%= contact.title %></small><br>
                    <small><%= contact.department %></small>
                </h5>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <% unless contact.email.blank? %>
                <i class="fa fa-envelope">
                  <%= contact.email %>
                </i><br>
                <% end %>
                <% unless contact.phone.blank? %>
                <i class="fa fa-phone">
                  <%= contact.phone %>
                </i>
                <% end %>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="contact-<%= contact.id %>" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Edit Contact</h4>
                </div>
                <div class="modal-body">
                    <%= simple_form_for [@opportunity, contact],remote: true do |f| %>
                    <div class="row">
                        <div class="col-lg-6">
                            <h4>Contact Details</h4>
                            <br>
                            <%= f.input :name, label: false, placeholder: "Name", autofocus: true %>
                            <%= f.input :title, label: false, placeholder: "Position title" %>
                            <%= f.input :department, label: false, placeholder: "Department" %>
                        </div>
                        <div class="col-lg-6">
                          <br><br><br>
                            <%= f.input :email, label: false, placeholder: "Email" %>
                            <%= f.input :phone, label: false, placeholder: "Phone" %>
                            <%= f.input :fax, label: false, placeholder: "Fax" %>
                        </div>
                    </div>

                    <hr>

                    <h4>Mailing Address</h4>
                    <br>
                    <%= f.input :mailing_street, label: false, placeholder: "Street" %>
                    <div class="row">
                        <div class="col-lg-6">
                            <%= f.input :mailing_city, label: false, placeholder: "City" %>
                            <%= f.input :mailing_state, label: false, placeholder: "State" %>
                        </div>
                        <div class="col-lg-6">
                            <%= f.input :mailing_postal_code, label: false, placeholder: "Postal code" %>
                            <%= f.input :mailing_country, label: false, include_blank: "Choose country" %>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <%= f.button :submit, class: "btn-success" %>
                    <% end %>
                    <%= link_to 'Cancel', '#', class: "btn btn-default", data: {dismiss: "modal"} %>
                </div>
            </div>
        </div>
    </div>

    <% end %>
<% end %>
