<!-- Modal -->
<div id="opportunityModalForm" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 1000px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><%= yield :form_title %></h4>
            </div>

            <% if @accounts.blank? %>
            <div class="modal-body">

                <div class="text-center">
                    <h3>Create account first before create opportunity</h3>
                </div>
            </div>
            <div class="modal-footer">
                <%= link_to 'Cancel', '#', class: "btn btn-default", data: {dismiss: "modal"} %>
            </div>
        <% else %>
            <div class="modal-body">

                <%= simple_form_for @opportunity, html: {multipart: true} do |f| %>

                <div class="row">
                    <div class="col-lg-4">
                        <h4>Opportunity Details</h4>
                        <br>
                        <%= f.input :name, label: "Opportunity Name",
                        placeholder: "Opportunity name", autofocus: true %>
                        <%= f.association :account, label: "Account Name",
                        include_blank: "Choose related account",
                        label_method: lambda { |account| "#{account.account_name}" } %>
                        <%= f.input :close_date, as: :date_time_picker %>
                    </div>
                    <div class="col-lg-4">
                        <br><br><br>
                        <%= f.input :business_type, label: "Business Type",
                        placeholder: "Business type" %>
                        <%= f.input :probability, label: "Probability",
                        placeholder: "Probability in percentage" %>
                        <%= f.input :amount, label: "Amount", placeholder: "Opportunity amount" %>
                    </div>
                    <div class="col-lg-4">
                        <br><br><br>
                        <%= f.input :description, input_html: {rows: 5}, label: "Description",
                        placeholder: "Opportunity description" %>
                        <%= f.input :loss_reason, label: "Loss Reason", placeholder: "Loss reason" %>
                    </div>
                </div>
                <hr>
                <h4>Documents Upload</h4>
                <br>
                <%= file_field_tag "docs[]",type: :file, multiple: true %>
                <%= f.hint "Can upload multiple files"%>

                <% if @opportunity.documents.blank? %>
                There are no documents uploaded yet.
            <% else %>
                <% @opportunity.documents.each do |document| %>
                <%= check_box_tag "attached[]", document.id %>
                <%= link_to document.doc_file_name, document.doc.url %>
                <br>
                <% end %>
                <!-- @opportunity.documents.each -->
                <br>
                <p>Check the box(es) to
                    <span style="color: red;">DELETE</span>
                    attachment(s) or</p>
                <%= check_box_tag "delete_all" %>
                DELETE ALL
                <p>to delete
                    <span style="color: red;">ALL</span>
                    attachments</p>
                <% end %>
                <!-- @opportunity.documents.blank? -->

            </div>
            <div class="modal-footer">
                <%= f.button :submit, class: "btn-success" %>
                <% end %>
                <!-- simple_form_for -->

                <%= link_to 'Cancel', '#', class: "btn btn-default", data: {dismiss: "modal"} %>
            </div>
            <% end %>
            <!-- @accounts.blank? -->

        </div>

    </div>
</div>
