<h2>Tasks List</h2>
<%= pluralize(@tasks.count, 'item')%>

<div class="text-center">
<%= page_entries_info @tasks %><br>
<%= paginate @tasks %>
</div>

<hr>
<% if @tasks.blank? %>
There are no tasks yet.
<% else %>
<div class="row">
    <div class="col-lg-1 text-center">
        <strong>ID</strong>
    </div>
    <div class="col-lg-3">
        <strong>Description</strong>
    </div>
    <div class="col-lg-2">
        <strong>Due Date</strong>
    </div>
    <div class="col-lg-2">
        <strong>Opportunity Name</strong>
    </div>
    <div class="col-lg-2">
        <strong>Account Name</strong>
    </div>
    <div class="col-lg-2">
        <strong>Created At DateTime</strong>
    </div>
</div>

<% @tasks.each do |task| %>
<hr>
<div class="row">
    <div class="col-lg-1 text-center"><%= task.id %></div>
    <div class="col-lg-3"><%= link_to task.description.truncate(50), opportunity_path(task.opportunity, anchor: "t#{task.id}") %></div>
    <div class="col-lg-2">
        <% if task.due_date.blank? %>
        <span style="color: red;">Date not specified</span>
    <% else %>
        <%= task.due_date.strftime('%d %b %Y') %><br>
        (<%= distance_of_time_in_words(Time.now, task.due_date) %>
        left)
        <% end %>
    </div>
    <div class="col-lg-2"><%= link_to task.opportunity.name, opportunity_path(task.opportunity) %></div>
    <div class="col-lg-2"><%= link_to task.opportunity.account.account_name,
account_path(task.opportunity.account) %></div>
    <div class="col-lg-2"><%= task.created_at.strftime('%d %b %Y %H:%M:%S') %></div>
</div>
<% end %>
<br>
<div class="text-center">
<%= page_entries_info @tasks %><br>
<%= paginate @tasks %>
</div>
<% end %>
